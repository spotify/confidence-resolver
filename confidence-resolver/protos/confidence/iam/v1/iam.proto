syntax = "proto3";
package confidence.iam.v1;

import "google/api/resource.proto";
import "google/api/field_behavior.proto";

option java_package = "com.spotify.confidence.iam.v1";
option java_multiple_files = true;
option java_outer_classname = "IamProto";

// A Client allows an app to access certain Confidence services like
// resolving flags and sending events.
// Minimal version for resolver - unused fields removed.
message Client {
  option (google.api.resource) = {
    type: "iam.confidence.dev/Client"
    pattern: "clients/{client}"
    singular: "client"
    plural: "clients"
  };

  // The resource name of the client.
  string name = 1 [
    (google.api.field_behavior) = OUTPUT_ONLY,
    (google.api.field_behavior) = IDENTIFIER
  ];
}

// The credentials required for a client to access Confidence.
// Minimal version for resolver - unused fields removed.
message ClientCredential {
  option (google.api.resource) = {
    type: "iam.confidence.dev/ClientCredential"
    pattern: "clients/{client}/credentials/{credential}"
    singular: "clientCredential"
    plural: "clientCredentials"
  };

  // The resource name of the client.
  string name = 1 [(google.api.field_behavior) = IDENTIFIER];

  // The credential method used by this client.
  oneof credential {
    // A simple plaintext secret.
    ClientSecret client_secret = 3 [(google.api.field_behavior) = OPTIONAL];
  }

  // A simple plaintext secret.
  message ClientSecret {
    // The secret used to authenticate a client.
    string secret = 1 [
      (google.api.field_behavior) = OUTPUT_ONLY
    ];
  }
}
