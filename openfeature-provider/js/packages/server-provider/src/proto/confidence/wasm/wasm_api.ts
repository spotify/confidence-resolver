// Code generated by protoc-gen-ts_proto. DO NOT EDIT.
// versions:
//   protoc-gen-ts_proto  v2.11.0
//   protoc               v5.29.3
// source: confidence/wasm/wasm_api.proto

/* eslint-disable */
import { BinaryReader, BinaryWriter } from '@bufbuild/protobuf/wire';
import { ResolveFlagsRequest, ResolveFlagsResponse } from '../flags/resolver/v1/api';
import { ReadOperationsRequest, ReadResult, VariantData } from '../flags/resolver/v1/internal_api';

export const protobufPackage = 'confidence.flags.resolver.v1';

/** Request for resolving flags with sticky (materialized) assignments */
export interface ResolveWithStickyRequest {
  /** The standard resolve request */
  resolveRequest?: ResolveFlagsRequest | undefined;
  /** if a materialization info is missing, we want tor return to the caller immediately */
  failFastOnSticky: boolean;
  /** if we should support sticky or completely skip the flag if they had sticky rules */
  notProcessSticky: boolean;
  /** Context about the materialization required for the resolve */
  materializations: ReadResult[];
}

/** Response from resolving with sticky assignments */
export interface ResolveWithStickyResponse {
  success?: ResolveWithStickyResponse_Success | undefined;
  readOpsRequest?: ReadOperationsRequest | undefined;
}

/** Successful resolution with materialization updates */
export interface ResolveWithStickyResponse_Success {
  response?: ResolveFlagsResponse | undefined;
  /** New assignments that should be stored */
  materializationUpdates: VariantData[];
}

export interface LogMessage {
  message: string;
}

function createBaseResolveWithStickyRequest(): ResolveWithStickyRequest {
  return { resolveRequest: undefined, failFastOnSticky: false, notProcessSticky: false, materializations: [] };
}

export const ResolveWithStickyRequest: MessageFns<ResolveWithStickyRequest> = {
  encode(message: ResolveWithStickyRequest, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {
    if (message.resolveRequest !== undefined) {
      ResolveFlagsRequest.encode(message.resolveRequest, writer.uint32(10).fork()).join();
    }
    if (message.failFastOnSticky !== false) {
      writer.uint32(24).bool(message.failFastOnSticky);
    }
    if (message.notProcessSticky !== false) {
      writer.uint32(32).bool(message.notProcessSticky);
    }
    for (const v of message.materializations) {
      ReadResult.encode(v!, writer.uint32(42).fork()).join();
    }
    return writer;
  },

  decode(input: BinaryReader | Uint8Array, length?: number): ResolveWithStickyRequest {
    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);
    const end = length === undefined ? reader.len : reader.pos + length;
    const message = createBaseResolveWithStickyRequest();
    while (reader.pos < end) {
      const tag = reader.uint32();
      switch (tag >>> 3) {
        case 1: {
          if (tag !== 10) {
            break;
          }

          message.resolveRequest = ResolveFlagsRequest.decode(reader, reader.uint32());
          continue;
        }
        case 3: {
          if (tag !== 24) {
            break;
          }

          message.failFastOnSticky = reader.bool();
          continue;
        }
        case 4: {
          if (tag !== 32) {
            break;
          }

          message.notProcessSticky = reader.bool();
          continue;
        }
        case 5: {
          if (tag !== 42) {
            break;
          }

          message.materializations.push(ReadResult.decode(reader, reader.uint32()));
          continue;
        }
      }
      if ((tag & 7) === 4 || tag === 0) {
        break;
      }
      reader.skip(tag & 7);
    }
    return message;
  },

  fromJSON(object: any): ResolveWithStickyRequest {
    return {
      resolveRequest: isSet(object.resolveRequest)
        ? ResolveFlagsRequest.fromJSON(object.resolveRequest)
        : isSet(object.resolve_request)
        ? ResolveFlagsRequest.fromJSON(object.resolve_request)
        : undefined,
      failFastOnSticky: isSet(object.failFastOnSticky)
        ? globalThis.Boolean(object.failFastOnSticky)
        : isSet(object.fail_fast_on_sticky)
        ? globalThis.Boolean(object.fail_fast_on_sticky)
        : false,
      notProcessSticky: isSet(object.notProcessSticky)
        ? globalThis.Boolean(object.notProcessSticky)
        : isSet(object.not_process_sticky)
        ? globalThis.Boolean(object.not_process_sticky)
        : false,
      materializations: globalThis.Array.isArray(object?.materializations)
        ? object.materializations.map((e: any) => ReadResult.fromJSON(e))
        : [],
    };
  },

  toJSON(message: ResolveWithStickyRequest): unknown {
    const obj: any = {};
    if (message.resolveRequest !== undefined) {
      obj.resolveRequest = ResolveFlagsRequest.toJSON(message.resolveRequest);
    }
    if (message.failFastOnSticky !== false) {
      obj.failFastOnSticky = message.failFastOnSticky;
    }
    if (message.notProcessSticky !== false) {
      obj.notProcessSticky = message.notProcessSticky;
    }
    if (message.materializations?.length) {
      obj.materializations = message.materializations.map(e => ReadResult.toJSON(e));
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<ResolveWithStickyRequest>, I>>(base?: I): ResolveWithStickyRequest {
    return ResolveWithStickyRequest.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<ResolveWithStickyRequest>, I>>(object: I): ResolveWithStickyRequest {
    const message = createBaseResolveWithStickyRequest();
    message.resolveRequest =
      object.resolveRequest !== undefined && object.resolveRequest !== null
        ? ResolveFlagsRequest.fromPartial(object.resolveRequest)
        : undefined;
    message.failFastOnSticky = object.failFastOnSticky ?? false;
    message.notProcessSticky = object.notProcessSticky ?? false;
    message.materializations = object.materializations?.map(e => ReadResult.fromPartial(e)) || [];
    return message;
  },
};

function createBaseResolveWithStickyResponse(): ResolveWithStickyResponse {
  return { success: undefined, readOpsRequest: undefined };
}

export const ResolveWithStickyResponse: MessageFns<ResolveWithStickyResponse> = {
  encode(message: ResolveWithStickyResponse, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {
    if (message.success !== undefined) {
      ResolveWithStickyResponse_Success.encode(message.success, writer.uint32(10).fork()).join();
    }
    if (message.readOpsRequest !== undefined) {
      ReadOperationsRequest.encode(message.readOpsRequest, writer.uint32(26).fork()).join();
    }
    return writer;
  },

  decode(input: BinaryReader | Uint8Array, length?: number): ResolveWithStickyResponse {
    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);
    const end = length === undefined ? reader.len : reader.pos + length;
    const message = createBaseResolveWithStickyResponse();
    while (reader.pos < end) {
      const tag = reader.uint32();
      switch (tag >>> 3) {
        case 1: {
          if (tag !== 10) {
            break;
          }

          message.success = ResolveWithStickyResponse_Success.decode(reader, reader.uint32());
          continue;
        }
        case 3: {
          if (tag !== 26) {
            break;
          }

          message.readOpsRequest = ReadOperationsRequest.decode(reader, reader.uint32());
          continue;
        }
      }
      if ((tag & 7) === 4 || tag === 0) {
        break;
      }
      reader.skip(tag & 7);
    }
    return message;
  },

  fromJSON(object: any): ResolveWithStickyResponse {
    return {
      success: isSet(object.success) ? ResolveWithStickyResponse_Success.fromJSON(object.success) : undefined,
      readOpsRequest: isSet(object.readOpsRequest)
        ? ReadOperationsRequest.fromJSON(object.readOpsRequest)
        : isSet(object.read_ops_request)
        ? ReadOperationsRequest.fromJSON(object.read_ops_request)
        : undefined,
    };
  },

  toJSON(message: ResolveWithStickyResponse): unknown {
    const obj: any = {};
    if (message.success !== undefined) {
      obj.success = ResolveWithStickyResponse_Success.toJSON(message.success);
    }
    if (message.readOpsRequest !== undefined) {
      obj.readOpsRequest = ReadOperationsRequest.toJSON(message.readOpsRequest);
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<ResolveWithStickyResponse>, I>>(base?: I): ResolveWithStickyResponse {
    return ResolveWithStickyResponse.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<ResolveWithStickyResponse>, I>>(object: I): ResolveWithStickyResponse {
    const message = createBaseResolveWithStickyResponse();
    message.success =
      object.success !== undefined && object.success !== null
        ? ResolveWithStickyResponse_Success.fromPartial(object.success)
        : undefined;
    message.readOpsRequest =
      object.readOpsRequest !== undefined && object.readOpsRequest !== null
        ? ReadOperationsRequest.fromPartial(object.readOpsRequest)
        : undefined;
    return message;
  },
};

function createBaseResolveWithStickyResponse_Success(): ResolveWithStickyResponse_Success {
  return { response: undefined, materializationUpdates: [] };
}

export const ResolveWithStickyResponse_Success: MessageFns<ResolveWithStickyResponse_Success> = {
  encode(message: ResolveWithStickyResponse_Success, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {
    if (message.response !== undefined) {
      ResolveFlagsResponse.encode(message.response, writer.uint32(10).fork()).join();
    }
    for (const v of message.materializationUpdates) {
      VariantData.encode(v!, writer.uint32(26).fork()).join();
    }
    return writer;
  },

  decode(input: BinaryReader | Uint8Array, length?: number): ResolveWithStickyResponse_Success {
    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);
    const end = length === undefined ? reader.len : reader.pos + length;
    const message = createBaseResolveWithStickyResponse_Success();
    while (reader.pos < end) {
      const tag = reader.uint32();
      switch (tag >>> 3) {
        case 1: {
          if (tag !== 10) {
            break;
          }

          message.response = ResolveFlagsResponse.decode(reader, reader.uint32());
          continue;
        }
        case 3: {
          if (tag !== 26) {
            break;
          }

          message.materializationUpdates.push(VariantData.decode(reader, reader.uint32()));
          continue;
        }
      }
      if ((tag & 7) === 4 || tag === 0) {
        break;
      }
      reader.skip(tag & 7);
    }
    return message;
  },

  fromJSON(object: any): ResolveWithStickyResponse_Success {
    return {
      response: isSet(object.response) ? ResolveFlagsResponse.fromJSON(object.response) : undefined,
      materializationUpdates: globalThis.Array.isArray(object?.materializationUpdates)
        ? object.materializationUpdates.map((e: any) => VariantData.fromJSON(e))
        : globalThis.Array.isArray(object?.materialization_updates)
        ? object.materialization_updates.map((e: any) => VariantData.fromJSON(e))
        : [],
    };
  },

  toJSON(message: ResolveWithStickyResponse_Success): unknown {
    const obj: any = {};
    if (message.response !== undefined) {
      obj.response = ResolveFlagsResponse.toJSON(message.response);
    }
    if (message.materializationUpdates?.length) {
      obj.materializationUpdates = message.materializationUpdates.map(e => VariantData.toJSON(e));
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<ResolveWithStickyResponse_Success>, I>>(
    base?: I,
  ): ResolveWithStickyResponse_Success {
    return ResolveWithStickyResponse_Success.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<ResolveWithStickyResponse_Success>, I>>(
    object: I,
  ): ResolveWithStickyResponse_Success {
    const message = createBaseResolveWithStickyResponse_Success();
    message.response =
      object.response !== undefined && object.response !== null
        ? ResolveFlagsResponse.fromPartial(object.response)
        : undefined;
    message.materializationUpdates = object.materializationUpdates?.map(e => VariantData.fromPartial(e)) || [];
    return message;
  },
};

function createBaseLogMessage(): LogMessage {
  return { message: '' };
}

export const LogMessage: MessageFns<LogMessage> = {
  encode(message: LogMessage, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {
    if (message.message !== '') {
      writer.uint32(10).string(message.message);
    }
    return writer;
  },

  decode(input: BinaryReader | Uint8Array, length?: number): LogMessage {
    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);
    const end = length === undefined ? reader.len : reader.pos + length;
    const message = createBaseLogMessage();
    while (reader.pos < end) {
      const tag = reader.uint32();
      switch (tag >>> 3) {
        case 1: {
          if (tag !== 10) {
            break;
          }

          message.message = reader.string();
          continue;
        }
      }
      if ((tag & 7) === 4 || tag === 0) {
        break;
      }
      reader.skip(tag & 7);
    }
    return message;
  },

  fromJSON(object: any): LogMessage {
    return { message: isSet(object.message) ? globalThis.String(object.message) : '' };
  },

  toJSON(message: LogMessage): unknown {
    const obj: any = {};
    if (message.message !== '') {
      obj.message = message.message;
    }
    return obj;
  },

  create<I extends Exact<DeepPartial<LogMessage>, I>>(base?: I): LogMessage {
    return LogMessage.fromPartial(base ?? ({} as any));
  },
  fromPartial<I extends Exact<DeepPartial<LogMessage>, I>>(object: I): LogMessage {
    const message = createBaseLogMessage();
    message.message = object.message ?? '';
    return message;
  },
};

type Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;

export type DeepPartial<T> = T extends Builtin
  ? T
  : T extends globalThis.Array<infer U>
  ? globalThis.Array<DeepPartial<U>>
  : T extends ReadonlyArray<infer U>
  ? ReadonlyArray<DeepPartial<U>>
  : T extends {}
  ? { [K in keyof T]?: DeepPartial<T[K]> }
  : Partial<T>;

type KeysOfUnion<T> = T extends T ? keyof T : never;
export type Exact<P, I extends P> = P extends Builtin
  ? P
  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };

function isSet(value: any): boolean {
  return value !== null && value !== undefined;
}

export interface MessageFns<T> {
  encode(message: T, writer?: BinaryWriter): BinaryWriter;
  decode(input: BinaryReader | Uint8Array, length?: number): T;
  fromJSON(object: any): T;
  toJSON(message: T): unknown;
  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;
  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;
}
